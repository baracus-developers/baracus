#!/usr/bin/perl

use lib '/var/spool/baracus/www/modules';
use BATools qw(:standard);
use CGI qw(:standard);

my $source_help = "$BATools::baPath/htdocs/help/source.hlp";

my $dselect = BATools::getDistroSelectionList("", "", "size='10'");
my $help = print_help();

########################################################################################################
#  Print HTML
########################################################################################################

print "Content-type: text/html\n\n";

print <<HTML0;

<html>
	<head>
		<META HTTP-EQUIV="Expires" CONTENT="Tue, 04 Dec 1993 21:29:02 GMT">
		<link rel='stylesheet' href='/$BATools::baRoot/css/common.css' type='text/css' >
		<link rel='stylesheet' href='/$BATools::baRoot/css/forms.css' type='text/css' >
		<script type="text/javascript" src="/$BATools::baRoot/script/common.js"></script>
	</head>
	<body background="/baracus/images/bg06b.jpg">
	<div id='f-labels'>
	<div id='block1'>
	<h1>Add Source Entries</h1>
	</div>

	<div id='block2'>
		<br><br>
		<form name="add" action="/$BATools::baCGI/sourceHandler">
			<br>
			<br>
			<h3>Distributions</h3>
			$dselect
			<br>
			<input class="sadd" type="checkbox"  name="iso" value="iso" disabled />
			<font class="sadd" color="grey">Download ISO</font><br>
			<input class="sadd" type="checkbox" name="proxy" value="proxy" disabled />
			<font class="sadd" color="grey">Use Proxy</font><br>
			<input type="hidden" name="sub" value="add">
			<input type="hidden" name="ref" value="yes">
			<input type="hidden" name="user" value="azforme">
			<input type="hidden" name="pass" value="novell123">
			<input class="button" type="submit" value="Add">
		</form>
	</div>

	<div id='status'>
	<textarea name="comments" class="tbox" readonly="yes">$help</textarea>
	</div>
	</div>
	<body>
	</html>

HTML0

########################################################################################################
#  Read Help File
########################################################################################################

sub print_help()
{
	my $retString = "";
	open (MYFILE, $source_help) || return "Error Opening Help File:\n$!";
	while(<MYFILE>)
	{
		$retString = $retString.$_;
	}
	close (MYFILE);
	return $retString; 
}	

